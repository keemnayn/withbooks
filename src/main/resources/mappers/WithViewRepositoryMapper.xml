<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.withbooks.web.repository.WithViewRepository">

<!-- 위드 전체 목록 조회 -->
<select id="findAll" resultType="WithView">
  SELECT
    *
    <!-- id, face_yn, name, intro, img, location, personnel, member_cnt, category_name
    CASE interval
      WHEN interval = '1' THEN '월 1회'
      WHEN interval = '2' THEN '월 2회'
      WHEN interval = '3' THEN '월 3회'
      WHEN interval = '4' THEN '월 4회'  
      ELSE '포함되지 않는다.'
    END AS interval -->
  FROM with_view
  ORDER BY id DESC
</select>

  <select id="findAllByWithId" resultType="java.lang.String">
    select b.name category_name from with_category  a join book_category b
    on a.category_id = b.id
    where a.with_id =  #{withId}

  </select>




</mapper>

