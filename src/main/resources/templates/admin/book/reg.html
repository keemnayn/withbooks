<!DOCTYPE html>
<html
        lang="en"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{inc/admin/layout.html}"
>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/newtil-css@0.1.44/dist/style.css" />
    <script src="/js/admin/book/detail.js" defer></script>
    <style>
        .n-form>div:not(:first-child) {
            margin-top: 0
        }

        .n-toggle {

        /* toggle-type:check */
        --toggle-check-border-color: var(--color-main-2);
        }
    </style>
</head>
<body>
    <main layout:fragment="main" class="n-panel n-main-panel flex-direction:column">

        <!-- api 검색부 -->
        <section id="search-section" class="mt:4 w:100p">
            <h1 class="d:none">검색</h1>
                <div class="n-container px:4 lg:px:10">
                    <div class="search-div n-form n-field-textbox:underline d:flex justify-content:space-around">
                        <select name="sort">
                            <option value="1">책리스트</option>
                            <option value="2">검색어</option>
                            <option value="3">ISBN 검색</option>
                        </select>
                        <div class="search-input-div d:flex flex-direction:row w:100p">
                            <select name="QueryType" >
                                <option value="Bestseller">베스트셀러</option>
                                <option value="ItemNewAll">신간</option>
                                <option value="ItemNewSpecial">특별 신간</option>
                            </select>
                        </div>
                        <button type="submit" class="n-btn n-btn-type:filled">검색</button>
                    </div>
                </div>
            </section>

            <div class="d:flex justify-content:space-between mt:4 px:10">
                <div class="d:flex ai:center">검색 결과 : <span th:text="${totalResults}"></span> 건</div>
                <button class="n-btn">선택 반영</button>
            </div>
    
    
            <section class="n-container p:4 lg:px:10">
                <h1 class="d:none">Main</h1>
                <section id="book-list" class="book-list">
                    <h1 class="d:none">책 리스트</h1>
    
                    <section class="d:flex align-items:center pb:4 pt:4 bd-bottom bg-color:main-1 pr:2">
                        <h1 class="d:none">헤더</h1>
                        <div class="w:1p text-align:center pl:5">
                            <label>
                                <input class="n-toggle n-toggle-type:check-box n-toggle-size:1" type="checkbox" name="select-all">
                                전체선택
                            </label>
                        </div>
                        <!-- <div class="w:2p text-align:center">카테고리</div>
                        <div class="w:5p text-align:center">제목</div>
                        <div class="w:2p text-align:center">저자</div>
                        <div class="w:2p text-align:center">ISBN13</div>
                        <div class="w:1p text-align:center">기존여부</div> -->
                    </section>
    
                    <section th:each="book : ${list}">
                        <h1 class="d:none">본문</h1>
                        <section class="book-detail d:flex pos:relative bd-left bd-right bd-bottom bd-color:main-3 of:hidden p:5 toggle"
                        >
                        <div class="w:1 text-align:center">
                            <label>
                                <input class="n-toggle n-toggle-type:check-box n-toggle-size:1" type="checkbox" name="select-all">
                            </label>
                        </div>
                        <div class="d:flex pos:relative w:100p">
                            <h1 class="d:none">디테일</h1>
                              <div class="d:flex fl-dir:column">
                                  <div class="">
                                      <img class="w:3 h:5 bd-radius:2" th:src="${book.cover}">
                                  </div>
                              </div>
                        
                              <span class="ml:6 w:10p">
                                  <span class="d:flex">
                                      <div>
                                          <div><b>ID</b> : <span th:text="${book.id}"></span></div>
                                      </div>
                        
                                      <div class="ml:auto">
                                          <div><b>카테고리</b> : <span th:text="${book.categoryName}"></span></div>
                                      </div>
                        
                                      <div class="ml:auto">
                                          <div><b>제목</b> : <span th:text="${book.title}"></span></div>
                                      </div>
                        
                                      <div class="ml:auto">
                                          <div><b>저자</b> : <span th:text="${book.author}"></span></div>
                                      </div>
                                  </span>
                        
                                  <span class="d:flex mt:3">
                                      <div><b>ISBN13</b> : <span th:text="${book.isbn13}"></span></div>
                                      <div class="ml:auto"><b>출판일</b> : <span th:text="${book.pubDate}"></span></div>
                                      <div class="ml:auto"><b>출판사</b> : <span th:text="${book.publisher}"></span></div>
                                  </span>
                                  
                                  <div class="d:flex mt:3 ai:center">
                                      <label class="w:1"><b>가격</b></label>
                                      <input class="bd bd-radius:2 w:10p pl:3 py:1" th:value="${book.price}"></input>
                                  </div>
                        
                                  <div class="d:flex mt:3">
                                      <label class="w:1"><b>설명</b></label>
                                      <textarea class="bd bd-radius:2 w:10p pl:3 py:1" th:utext="${book.description}"></textarea>
                                  </div>
                        
                                  <div class="d:flex mt:3">
                                      <label class="w:2"><b>구매링크</b></label>
                                      <input class="bd bd-radius:2 w:10p pl:3 py:1" th:value="${book.purchaseLink}"></input>
                                      
                                      <div class="d:flex jc:center ai:center"><a th:href="${book.purchaseLink}" class="icon icon:share_fat ml:2">링크</a></div>
                                  </div>
                              </span>
                          </div>
                        </section>
    
                    </section>
                </section>
                
            </section>


            <section class="mb:5 mt:3">
                <h1 class="d:none">페이저</h1>
                <ul class="n-pager" style="display: flex; justify-content: center;"
    
                    th:with="page=${param.p} eq null ? 1 : ${{param.p}}
                            ,temp=(${page}-1)/5
                            ,startnum=${T(java.lang.Math).floor(temp)} * 5 + 1
                            ,temp1 = ${count/6}
                            ,lastnum=${count} mod 6 > 0 ? ${temp1} + 1 : ${temp1}
                            ,endnum=${startnum+4} lt ${lastnum} ? ${startnum+4} : ${lastnum}
                            ">
                    <li>
                        <span th:if="${page} lt 6">이전</span>
                        <a href="list?page=5"
                        th:if="${page} ge 6">이전</a>
                    </li>
    
                    <li
                        th:each="n : ${#numbers.sequence(startnum, endnum)}"
                        th:class="${{param.p}} == ${n} ? 'active'">
                        <span th:if="${n} eq ${{param.p}}" th:text="${n}">1</span>
                        <a
                            th:if="${n} ne ${{param.p}}"
                            href="list?p=1"
                            th:href="@{./list(page=${n})}"
                            th:text="${n}">1</a>
                    </li>
                    <li>
                        <span th:if="${startnum+4} gt ${lastnum}">다음</span>
                        <a href="list?page=6" 
                        th:href="@{./list(page=${startnum}+5)}"
                        th:if="${startnum+4} lt ${lastnum}">다음</a >
                    </li>
                </ul>
            </section>

    </main>
</body>
</html>