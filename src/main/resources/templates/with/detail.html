<!doctype html>
<html lang="en" layout:decorate="~{inc/layout.html}" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Document</title>
  <!--  <script src="/js/book/list.js"></script>-->
  <link rel="stylesheet" type="text/css" href="/css/util/color.css" />
  <script src="/js/with/detail.js"></script>
  <style>
    /* *{
    font-family: "Noto Sans KR", sans-serif;
    font-size: 15px;

    color: var(--color-base-9);
} */

    .margin\:-20 {
      margin-left: -20px;
    }

    .box-shadow {
      box-shadow: 2px 4px 14px 0 rgba(157, 157, 157, 14%);
    }

    .board-list {
      --width-1: 32px;
      --height-1: 32px;
    }

    .backdrop {
      position: fixed;
      inset: 0;
      background-color: rgba(0, 0, 0, 0.06);
    }

    .modal-transform-xy {
      transform: translateX(170px) !important;
    }

    /*  모달창*/
  </style>
  <link>
</head>

<body>
<main class="flex-grow:1" layout:fragment="main">

  <!-- 로그인 모달 -->
  <section class="n-modal d:none  modal-transform-xy zi:5" id="login-modal" tabindex="-1">
    <h1 class="n-font:subtitle text-align:center fs:5 fw:2 mt:3 mb:4">로그인을 하시겠습니까?</h1>
    <p class="fs:2">로그인을하시면 조금 더 많은 서비스를 이용 할 수 있습니다. </p>
    <div class="mt:4 d:flex gap:4 jc:center">
      <button class="n-btn w:2 p:2 bg-color:main-2" id="login-close-btn" type="button">닫기</button>
      <a class="n-btn w:3 flex-grow:1" href="/user/login" id="login-open-btn" type="button">로그인</a>

    </div>
  </section>
  <div class="backdrop d:none zi:4" id="login-modal-backdrop"></div>

  <a class="m:2" href="list?m=3&p=1">
                        <span class="n-btn n-btn:void mt:3 pl:2" style="color: var(--color-base-5);">
                            <span class="	icon icon:caret_left icon-size:3 mx:1">아이콘</span>
                            전체 목록 보기
                        </span>
  </a>
  <section class="md:d:flex lg:d:block md:px:2 lg:px:0">
    <h1 class="d:none">위드 정보</h1>
    <div class="md:d:flex md:ai:center lg:d:block md:w:3 lg:h:4 lg:w:6p md:h:3 md:my:auto">
      <img class="h:4 w:100p md:h:100p border-radius:3" src="/puppy2.png" th:src="${with.img}"/>
    </div>

    <div class="md:flex-grow:1 md:px:3 lg:px:0" id="with-info">
      <ul class="d:flex gap:1 flex-wrap:wrap mx:3 my:4">
        <li class="border bd-color:base-2 border-radius:11 fs:1 pl:3 pr:3 pt:1 pb:1 mr:2"><span class=""
                                                                                                th:text="${with.faceYn == 1 ? '대면' : '비대면'}">대면</span>
        </li>
        <li class="bd-color:base-3 border-radius:11 fs:1 pl:3 pr:3 pt:1 mr:1 pb:1 background-color:main-6"
            th:each=" n : ${withCategoryNames}">
          <span class="color:base-1" th:text="${n}">소설</span>
        </li>
      </ul>
      <div class="ml:3 fs:6 fw:3 mb:3" th:text="${with.name}">책에퐁당</div>
      <!--    <div class="ml:3 mb:4 color:base-6 fw:3 mr:3">모임장소 <span th:text="${with.location}">서울시 마포구 노고산동</span></div>-->
      <div class="m:4 mb:4 mr:3 ml:3">
        <div class="md:d:flex lg:d:block">
          <div class="mb:2 md:mr:auto"><span class="color:base-6 fw:3 mr:3">모임장소</span><span th:text="${with.location}">서울 마포구 노곳나동</span>
          </div>
          <div class="mb:2 md:mr:6 md:w:4"><span class="color:base-6 fw:3 mr:3">모임형태</span><span
                  th:text="${with.faceYn == 1 ? '대면' : '비대면'}">대면</span></div>
        </div>

        <div class="md:d:flex lg:d:block">
          <div class="mb:2 md:mr:auto"><span class="color:base-6 fw:3 mr:3">모임주기</span><span
                  th:text="${'월 ' +with.interval +'회'}">월 1회</span></div>
          <div class="mb:2 md:mr:6 md:w:4">
            <span class="color:base-6 fw:3 mr:3">개설일</span><span
                  th:text="${#temporals.format(with.regDate,'yyyy-MM-dd')}">2023년 11월 15일</span>
          </div>
        </div>

        <div class="md:d:flex lg:d:block">
          <div class="mb:2 md:mr:auto"><span class="color:base-6 fw:3 mr:3">위드장</span><span
                  th:text="${nickname}">책친자</span></div>
          <div class="mb:2 md:mr:6 md:w:4"><span class="color:base-6 fw:3 mr:3">정원</span><span
                  th:text="${withMemberCnt + ' / ' + with.personnel +'명'} ">7 / 12</span></div>
        </div>
      </div>
      <div class="with-join-btn my:4">
        <form action="withdraw" method="post" name="deleteMember">
          <input name="with-id" th:value="${with.id}" type="hidden"/>
        </form>
        <button
                class="n-btn mx:auto px:5"
                sec:authorize="isAuthenticated()"
                th:classappend="${{joinYn}} == 1 ? 'joined n-btn-type:outline border-color:base-2 color:base-4': 'n-btn-type:filled'"
                th:text="${{joinYn}} == 1 ? '탈퇴하기' : '가입 신청하기'"
                type="button"
        >
          가입 신청하기 <span class="ml:2 icon icon icon:caret_right icon-color:sub-1"></span>
        </button>
        <button
                class="n-btn mx:auto px:5 anonymous"
                sec:authorize="isAnonymous()"
        >
          가입 신청하기
        </button>
      </div>
    </div>
  </section>
  <div class="with-tap-component">
    <ul class="n-tabbar justify-content:space-between menu-tap">
      <li class="active"><a>홈</a></li>
      <li><a id="debate" th:if="${joinYn == 0}" href="javascript:alert('회원가입이 필요합니다 :)')">토론서재</a></li>
      <li><a id="debate" th:if="${joinYn == 1}" th:href="@{/debate/list(m=3,wid=${with.id})}">토론서재</a></li>
      <li><a id="calendar" th:if="${joinYn == 0}" href="javascript:alert('회원가입이 필요합니다 :)')">모임일정</a></li>
      <li><a id="calendar" th:if="${joinYn == 1}" th:href="@{/calendar/index(m=3,wid=${with.id})}">모임일정</a></li>
      <li><a id="board" th:if="${joinYn == 0}" href="javascript:alert('박경인')">자유게시판</a></li>
      <li><a id="board" th:if="${joinYn == 1}" th:href="@{/free-board/list(m=3,wid=${with.id},p=1,s='latest')}">자유게시판</a></li>
      <!-- <li><a>북추천</a></li> -->
      <li><a>위드맴버</a></li>
    </ul>
  </div>


  <div id="content">
    <section class="pt:4 px:3">
      <h1 class="fs:6 fw:3 color:base-8">소개</h1>
      <pre class="mb:3"> <div class=" h:100p" th:text="${with.intro}">
        좋은 분들이 모여서 이야기하다 보면 공감대가 생기고 친밀감이 쌓여서 좋은 독자들로 이어나갔으면 좋겠다는 생각에 만들게 되었습니다.<br><br>

        [규칙]<br>
        어쩌고<br>
        저쩌고<br>
        화이팅<br><br>

        [계획]<br>
        잘만나고<br>
        잘읽고<br>
        화이팅<br>
        와아앙<br>

    </div></pre>
    </section>
    <div class="w:100p border-bottom border-width:3 border-color:base-2"><span class="d:none">선</span></div>

    <section class="my:5 px:3">
      <h1 class="fs:6 fw:3 mb:4 color:base-8">토론서재</h1>

      <div class="mt:4 d:flex mb:4 mt:4">
        <div class="d:flex">
          <img
                  class="w:3 h:3 border-radius:5 box-shadow"
                  src="/trend.png"
                  th:classappend="${dStat.index > 0} ? 'ml-4' : ''"
                  th:each="d, dStat : ${debateRoomList}"
                  th:if="${dStat.index < 5}"
                  th:src="${d.cover}"
          />
        </div>

        <!--        <div class="d:flex flex-direction:column " style="margin-left: -40px;"><img src="/trend.png"></div>-->
        <!--        <div class="d:flex flex-direction:column " style="margin-left: -40px;"><img src="/trend.png"></div>-->
      </div>
      <!--
<div class="mt:4 pl:3 d:flex pos:relative ">
<div class="pos:absolute"><img src="/trend.png" ></div>
<div class="pos:absolute left:2"><img src="/trend.png" ></div>
<div class="pos:absolute left:3"><img src="/trend.png" ></div>
<div class="pos:absolute left:4"><img src="/trend.png" ></div>
</div> -->
      <div class="mb:2 mt:6" th:if="${debateTopRoom != null}">
        <div class="border d:inline-block d:flex flex-direction:column border-radius:8 p:4">
          <div class="text-align:center fw:3 fs:4">토론 Best</div>
          <div class="d:flex  pl:2 pr:2 pt:2 pb:2">

            <img class=" w:3 h:3" th:src="${debateTopRoom.cover}"/>
            <div class="flex-grow:1 text-align:center align-self:center pr:2 pl:2">
              <div><span class="color:main-5 fs:3 fw:3">“[[${with.name}]]”</span> 위드는 <span
                      class="color:main-5 fs:3 fw:3">“[[${debateTopRoom.title}]]”</span> 책으로 총 <span
                      class="color:main-5 fs:3 fw:3">“[[${debateTopRoom.boardCnt}]]건”</span> 의 토론을 나누었어요!
              </div>
              <div>글이 많이 올라왔다는건, 그만큼 논쟁거리가 다분하다는 방증!</div>
            </div>
          </div>
        </div>
      </div>


    </section>

    <div class="w:100p border-bottom border-width:3 border-color:base-2"><span class="d:none">선</span></div>
    <section class="px:3 my:5">
      <h1 class="fs:6 fw:3 color:base-8 mb:4">모임일정</h1>
<div class="d:flex">
      <div
              class="event border w:6 d:flex  ai:center h:fit-content gap:3 px:2 py:2 border-radius:5 mt:4 pl:3 mr:3 my:3"
              th:data-event-date="${dateTime}"
              th:each="event, iter : ${calendarEvents}" th:if="${iter.index < 3}"
              th:with="dateTime=${event.startDateTime},
                      date=${#strings.listSplit(dateTime, 'T')[0]},
                      time=${#strings.listSplit(dateTime, 'T')[1]},
                      monthDay=${#strings.substring(date, 5, 10)}"
      >
        <div class="w:fit-content h:fit-content border-radius:5 px:2 py:2 bg-color:main-1 box-sizing:border-box">
          <div class="mb:1 text-align:center box-sizing:border-box fw:3 color:main-5" th:text="${monthDay}">
            3/9
          </div>
          <div class="text-align:center box-sizing:border-box color:base-4 fw:3" th:text="${time}">11:15</div>
        </div>
        <div class="">
          <div class="fs:3 mb:1" th:text="${event.title}">종이달</div>
          <div class="fs:2 color:base-5 deco icon:map_pin icon-color:main-5 deco deco-margin-right:1"
               th:text="${event.location}">노멤버라운지
          </div>
        </div>
        <div class="d-day fs:3 mb:1 ml:auto fw:3 fs:4 mr:2"></div>
      </div>
</div>

      <button class="fs:3 mt:4 px:2 py:1 border-radius:5 bg-color:main-1 color:main-5" id="show-more">+ more</button>
    </section>

    <div class="w:100p border-bottom border-width:3 border-color:base-2"><span class="d:none">선</span></div>
    <section class="my:5 px:3">
      <h1 class="fs:6 fw:3 color:base-8 mb:4">
        위드맴버
        <span th:text="${withMemberCnt +' 명'}">7명</span>
      </h1>

      <!-- 여기 inline flex 추가  -->
      <div class="d:inline-flex mx:2 ai:center mr:4" th:each=" wm : ${withMemberList}">
        <div class="w:1 h:1 mr:3">
          <img class="mr:5 d:inline-block h:100p w:100p border-radius:full" th:src="${wm.img}"/>
        </div>
        <div class="d:flex ai:center flex-direction:column">
          <div class="mr:auto fs:3"
               th:classappend="${wm.masterYn} ?'deco  deco-pos:right  icon-color:main-5 icon:star_fill' :''"
               th:text="${wm.nickName}">뉴렉이
          </div>
          <div class="color:base-3 fs:2" th:text="${wm.joinDate}">2023.02.23</div>
        </div>
      </div>
    </section>

    <div class="w:100p border-bottom border-width:3 border-color:base-2"><span class="d:none">선</span></div>

    <section class="my:5 board-list">
      <h1 class="fs:6 fw:3 color:base-8 mb:4">자유게시판</h1>

      <section class="border-bottom px:3 pb:2 mb:3" th:each="b : ${freeBoardList}">
        <h1 class="d:none">게시글</h1>
        <div class="d:flex ai:center mb:3">
          <div class="w:1 h:1 mr:2">
            <img class="w:100p h:100p border-radius:5" src="/image/shorts/uie.jpg"
                 th:src="${b.userImg}"
            />
          </div>
          <div>
            <div th:text="${b.nickname}">뉴렉이</div>
            <div class="fs:2 color:base-3" th:text="${b.regDate}">10분전</div>
          </div>

          <!-- <div class="ml:auto icon icon:dots_three_outline_vertical_fill"></div> -->
        </div>

        <div>
          <h1 class="fs:5 fw:3 mb:3"><a th:href="@{/free-board/detail(m=3,loc=0,fid=${b.id})}">[[${b.title}]]</a></h1>
          <p class="mb:2 ln-clamp:2" th:text="${b.content}">
            what i like what i like what ilike what i like what i likewhat i like what i like what ilike what i like
            what i like what i like what i like what i like what i like
            what i likewhat i like what i like what ilike what i like what i like what i like what i like what i like
            what i like what i likewhat i like what i like what ilike what
            i like what i like
          </p>

          <div class="border border-color:base-3 w:100p h:4 border-radius:5"
               th:if="${b.imgs.size()>0}"
          >
            <img class="w:100p h:4"
                 src="/image/shorts/"
                 th:if="${b.imgs.size()>0}"
                 th:src="${b.imgs[0]}"
            />
          </div>
        </div>

        <div class="mt:2 d:flex ai:center">
          <span class="deco d:inline-block border py:1 px:3 border-radius:7 icon:thumbs_up mr:3" th:text="${b.likeCnt}">12</span>
          <span class="deco d:inline-block py:1 px:3 border-radius:7 border icon:chat"
                th:text="${b.commentCnt}">12</span>
        </div>
      </section>


    </section>
  </div>
</main>
</body>
</html>
