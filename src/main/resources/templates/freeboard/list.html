<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{inc/layout.html}"
>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .profile-img{
            --height-1: 32px;
            --width-1: 32px;
        }
        .img-box{
            transition: transform 400ms;
        }
        .img-pager{
            --width-1: 10px;
            --height-1: 10px;
        }
        .selected-img-pager{
            background-color: var(--color-main-5);
            border-color: var(--color-main-5) !important;
            transition: background-color 400ms, border-color 400ms;
        }
        .selected-sort{
            --color-base-3: var(--color-base-9);
        }
        .cur-page{
            background-color: var(--color-main-5);
            color: var(--color-base-1) !important;
            border-width: 0 !important;
        }
        .icon\:dots_three_outline_vertical_fill{
            --top-1: -30px;
        }
        .icon\:dots_three_outline_vertical_fill:hover{
            background-color: var(--color-base-3);
            border-radius: 20px;
        }
        .pop-up-box{
            --top-1: -30px;
        }
        .icon\:file:hover,
        .icon\:trash:hover{
            background-color:var(--color-base-2); 
        }
        #del-modal-box{
            --color-base-3: rgba(30, 6, 6, 0.1);
        }
    </style>
    <script src="/js/freeboard/list.js" defer></script>
</head>
<body>
    <main class="px:3 pb:3 flex-grow:1" layout:fragment="main">
        <div class="with-tap-component">
            <ul class="n-tabbar justify-content:space-between menu-tap">
                <li ><a class="fw:3" id="home2" th:href="@{/with/detail(id=${param.wid})}">홈</a></li>
                <li ><a id="debate" th:href="@{/with/debate/list(wid=${param.wid})}" >토론서재</a></li>
                <li><a>모임일정</a></li>
                <li class="active" ><a id="board" th:href="@{/free-board/list(wid=${param.wid},p=1,s='latest')}">자유게시판</a></li>
                <li><a>북추천</a></li>
                <li><a>위드맴버</a></li>
            </ul>
        </div>
        <section id="sort" class="d:flex mt:3">
            <h1 class="d:none">정렬방식</h1>
            <div><a class="latest fs:2 color:base-3" th:classappend="${{param.s}}=='latest' ? 'selected-sort'" href="" th:href="@{./list(wid=${param.wid},p=1,s=latest)}">최신순</a></div>
            <div class="mx:2 fs:2 color:base-9">|</div>
            <div><a class="popular fs:2 color:base-3" th:classappend="${{param.s}}=='popular' ? 'selected-sort'" href="" th:href="@{./list(wid=${param.wid},p=1,s=popular)}">인기순</a></div>
        </section>
        
        <span id="board-list" class="board-list">
            <section class="d:flex fl-dir:column mt:6 bd-bottom pb:3" th:each="b : ${list}">
                <h1 class="d:none">게시글</h1>
                <span class="pos:relative">
                    <section class="d:flex ai:center">
                        <h1 class="d:none">사용자 정보</h1>
                        <div><img class="profile-img h:1 w:1 bd-radius:12" src="" th:src="${b.userImg}" alt=""></div>
                        <span class="ml:2">
                            <div class="fs:2" th:text="${b.nickname}">뉴렉이</div>
                            <div class="fs:1 color:base-5" th:text="${b.regDate}">10분전</div>
                        </span>
                    </section>
    
                    <section id="edit-del-btn-section" class="pos:relative">
                        <h1 class="d:none">수정/삭제 버튼</h1>
                        <button class="icon icon:dots_three_outline_vertical_fill icon-size:2 pos:absolute right:1 top:1 cursor:pointer">점점점</button>
                        
                        <ul class="pop-up-box pos:absolute top:1 right:3 bd bd-radius:4 bg-color:base-1 py:2 px:1 d:none">
                            <li>
                                <a class="edit-btn bd-radius:4 py:1 px:4 d:inline-block deco icon:file icon-color:main-5 color:main-5" href="">수정하기</a>
                            </li>
                            <li class="mt:2">
                                <button class="del-btn bd-radius:4 py:1 px:4 d:inline-block deco icon:trash icon-color:accent-1 color:accent-1" href="" th:attr="data-id=${b.id}">삭제하기</button>
                            </li>
                        </ul>
                    </section>
                    
                    <a href="" th:href="@{./detail(fid=${b.id})}">
                        <div class="fs:4 fw:3 mt:4" th:text="${b.title}">푸바오 신간 샀어요 !!</div>
        
                        <p class="ln-clamp:3 fs:3 mt:3" th:utext="${b.content}">오늘 교보문고 가니까 입구에 딱!!! 있더라구요!!! 어어쩌고 저쩌고 ㄴ으미능마니읜읨나음니ㅏ으미나으미느아미느이ㅏㅓㅎ호ㅓ로로ㅓ허ㅏㅗㅗㅓ</p>
        
                        <span th:if="!${#arrays.isEmpty(b.imgs)}">
                            <section class="bd bd-radius:6 bd-color:base-3 mt:3 h:6 d:flex fl-dir:column jc:center ai:center pos:relative">
                                <h1 class="d:none">이미지</h1>
    
                                <div class="w:10 h:10p py:4">
                                    <img class="w:10p h:10p object-fit:contain" src="/image/my/profile.png" alt="게시글 이미지" th:src="${b.imgs[0]}">
                                </div>

                            </section>
                        </span>
                    </a>
                    
                    <section class="mt:3">
                        <h1 class="d:none">좋아요 수 / 댓글 수</h1>
                        <div class="fs:2 color:base-6 deco icon:thumbs_up icon-color:base-5 deco-mr:1" th:text="${b.likeCnt}">13</div>
                        <div class="fs:2 color:base-6 deco icon:chat_circle icon-color:base-5 ml:3 deco-mr:1" th:text="${b.commentCnt}">13</div>
                    </section>
    
                </span>
            </section>

            <section id="del-modal-box" class="pos:fixed top:1 bottom:1 left:1 right:1 zi:4 d:flex ai:center jc:center bg-color:base-3 d:none">
                <h1 class="d:none">삭제 모달 창</h1>
                <span class="modal-center-box bd bd-radius:4 bg-color:base-1 w:5 h:3 d:flex fl-dir:column ai:center jc:center">
                    <div class="fs:4">정말로 삭제하시겠습니까?</div>
                    <div class="del-modal-div mt:5 d:flex">
                        <button class="del-btn bd bd-radius:4 bd-color:transparent bg-color:accent-1 px:4 py:2 color:base-1 cursor:pointer">삭제</button>
                        <button class="cancel-btn bd bd-radius:4 px:4 py:2 ml:4 cursor:pointer">취소</button>
                    </div>
                </span>
            </section>
        </span>

        <section class="mt:5 d:flex jc:center" 
            th:with="
                tmpa = (${count}-1) / 10,
                lastestPage = ${T(java.lang.Math).floor(tmpa)} + 1,
                tmp = (${{param.p}}-1) / 5,
                startnum = ${T(java.lang.Math).floor(tmp)} * 5 + 1
            "
        >
            <h1 class="d:none">페이저</h1>
            <ul class="d:flex jc:center ai:center" th:unless="${lastestPage} lt 1">
                <li th:unless="${startnum} eq 1" >
                    <a class="icon icon:caret_left" href="">이전</a>
                </li>

                <li class="ml:3" th:if="${n le lastestPage}" th:each="n : ${#numbers.sequence(startnum, startnum+4)}">
                    <a class="px:3 py:1 color:base-9 bd bd-radius:4" 
                        th:href="@{./list(wid=${param.wid},p=${n},s=${param.s})}" 
                        th:text="${n}"
                        th:classappend="${{param.p}} == ${n} ? 'cur-page'"
                    >1</a>
                </li>
                <li class="ml:3" th:if="${startnum + 5} le ${lastestPage}">
                    <a class="icon icon:caret_right" href="">다음</a>
                </li>
            </ul>
        </section>

        <section class=" pos:fixed right:2 md:right:3 lg:right:3 bottom:9 md:bottom:4 lg:bottom:4">
            <h1 class="d:none">플로팅 버튼</h1>
            <div><a class="icon icon:plus icon-color:sub-1 icon-size:4 bg-color:main-5 border-radius:12 zi:3 p:6" href="" th:href="@{reg(wid=${param.wid})}">asdf</a></div>
        </section>
    </main>
</body>
</html>